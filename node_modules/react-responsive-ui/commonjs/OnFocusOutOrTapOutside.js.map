{"version":3,"sources":["../source/OnFocusOutOrTapOutside.js"],"names":["OnFocusOutOrTapOutside","onFocusOutRef","onTapOutsideRef","stopListeningToTouches","current","listenToTouches","onBlur","event","onFocusOut","onTapOutsideTimer","clearTimeout","undefined","props","onTapOutside","onTapOutsideDelay","setTimeout","getTogglerNode","getContainerNode","children","cloneElement","Component","propTypes","func","isRequired","number","bool","node","defaultProps"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;AAEA;;;;IAIqBA,sB;;;;;;;;;;;;;;oNACpBC,a,GAAgB,+B,QAChBC,e,GAAkB,+B,QAclBC,sB,GAAyB;AAAA,UAAM,MAAKD,eAAL,CAAqBE,OAArB,CAA6BD,sBAA7B,EAAN;AAAA,G,QACzBE,e,GAAkB;AAAA,UAAM,MAAKH,eAAL,CAAqBE,OAArB,CAA6BC,eAA7B,EAAN;AAAA,G,QAClBC,M,GAAS,UAACC,KAAD;AAAA,UAAW,MAAKN,aAAL,CAAmBG,OAAnB,CAA2BE,MAA3B,CAAkCC,KAAlC,CAAX;AAAA,G,QAETC,U,GAAa,UAACD,KAAD,EAAW;AACvB;AACA;AACA,OAAI,MAAKE,iBAAT,EAA4B;AAC3BC,iBAAa,MAAKD,iBAAlB;AACA,UAAKA,iBAAL,GAAyBE,SAAzB;AACA;AACD,SAAKL,MAAL,CAAYC,KAAZ;AACA,G,QAEDD,M,GAAS,UAACC,KAAD,EAAW;AAAA,OACXC,UADW,GACI,MAAKI,KADT,CACXJ,UADW;;AAEnBA,cAAWD,KAAX;AACA,G,QAEDM,Y,GAAe,UAACN,KAAD,EAAW;AAAA,OACjBO,iBADiB,GACK,MAAKF,KADV,CACjBE,iBADiB;;AAEzBJ,gBAAa,MAAKD,iBAAlB;AACA,SAAKA,iBAAL,GAAyBM,WAAW,YAAM;AACzC;AACA;AACA,QAAI,MAAKN,iBAAT,EAA4B;AAC3B,WAAKA,iBAAL,GAAyBE,SAAzB;AACA,WAAKL,MAAL,CAAYC,KAAZ;AACA;AACD,IAPwB,EAOtBO,iBAPsB,CAAzB;AAQA,G;;;;;sCA1CmB;AAAA,OACXT,eADW,GACS,KAAKO,KADd,CACXP,eADW;;AAEnB,OAAIA,eAAJ,EAAqB;AACpB,SAAKA,eAAL;AACA;AACD;;;yCAEsB;AACtBK,gBAAa,KAAKD,iBAAlB;AACA;;AAED;;;;2BAiCS;AAAA,gBACqC,KAAKG,KAD1C;AAAA,OACAI,cADA,UACAA,cADA;AAAA,OACgBC,gBADhB,UACgBA,gBADhB;AAAA,OAEFC,QAFE,GAEW,KAAKN,KAFhB,CAEFM,QAFE;;;AAIRA,cAAW,gBAAMC,YAAN,CAAmBD,QAAnB,EAA6B;AACvCZ,YAAQ,KAAKL,aAAL,CAAmBG,OAAnB,IAA8B,KAAKH,aAAL,CAAmBG,OAAnB,CAA2BE;AAD1B,IAA7B,CAAX;;AAIAY,cACC;AAAA;AAAA;AACC,UAAK,KAAKjB,aADX;AAEC,uBAAkBgB,gBAFnB;AAGC,qBAAgBD,cAHjB;AAIC,iBAAY,KAAKR,UAJlB;AAKEU;AALF,IADD;;AAUA,UACC;AAAA;AAAA;AACC,UAAK,KAAKhB,eADX;AAEC,uBAAkBe,gBAFnB;AAGC,qBAAgBD,cAHjB;AAIC,mBAAc,KAAKH,YAJpB;AAKEK;AALF,IADD;AASA;;;;EA3EkD,gBAAME,S;;kBAArCpB,sB;;;AA8ErBA,uBAAuBqB,SAAvB,GAAmC;AAClCJ,mBAAkB,oBAAUK,IAAV,CAAeC,UADC;AAElCP,iBAAgB,oBAAUM,IAFQ;AAGlCd,aAAY,oBAAUc,IAAV,CAAeC,UAHO;AAIlCT,oBAAmB,oBAAUU,MAAV,CAAiBD,UAJF;AAKlClB,kBAAiB,oBAAUoB,IAAV,CAAeF,UALE;AAMlCL,WAAU,oBAAUQ,IAAV,CAAeH;AANS,CAAnC;;AASAvB,uBAAuB2B,YAAvB,GAAsC;AACrC;AACA;AACAb,oBAAmB,EAHkB;AAIrCT,kBAAiB;AAJoB,CAAtC","file":"OnFocusOutOrTapOutside.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport createRef from 'react-create-ref'\r\n\r\nimport OnFocusOut from './OnFocusOut'\r\nimport OnTapOutside from './OnTapOutside'\r\n\r\n/**\r\n * `<OnFocusOutOrTapOutside/>` sets `onBlur` on the child element.\r\n * Calls `onFocusOut` on focus out or tap outside.\r\n */\r\nexport default class OnFocusOutOrTapOutside extends React.Component {\r\n\tonFocusOutRef = createRef()\r\n\tonTapOutsideRef = createRef()\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { listenToTouches } = this.props\r\n\t\tif (listenToTouches) {\r\n\t\t\tthis.listenToTouches()\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout(this.onTapOutsideTimer)\r\n\t}\r\n\r\n\t// These're called from outside in `<Expandable/>`.\r\n\tstopListeningToTouches = () => this.onTapOutsideRef.current.stopListeningToTouches()\r\n\tlistenToTouches = () => this.onTapOutsideRef.current.listenToTouches()\r\n\tonBlur = (event) => this.onFocusOutRef.current.onBlur(event)\r\n\r\n\tonFocusOut = (event) => {\r\n\t\t// `onFocusOut` is triggered right after `onTapOutside`.\r\n\t\t// This workaround prevents duplicate `onFocusOut` call.\r\n\t\tif (this.onTapOutsideTimer) {\r\n\t\t\tclearTimeout(this.onTapOutsideTimer)\r\n\t\t\tthis.onTapOutsideTimer = undefined\r\n\t\t}\r\n\t\tthis.onBlur(event)\r\n\t}\r\n\r\n\tonBlur = (event) => {\r\n\t\tconst { onFocusOut } = this.props\r\n\t\tonFocusOut(event)\r\n\t}\r\n\r\n\tonTapOutside = (event) => {\r\n\t\tconst { onTapOutsideDelay } = this.props\r\n\t\tclearTimeout(this.onTapOutsideTimer)\r\n\t\tthis.onTapOutsideTimer = setTimeout(() => {\r\n\t\t\t// `onFocusOut` is triggered right after `onTapOutside`.\r\n\t\t\t// This workaround prevents duplicate `onFocusOut` call.\r\n\t\t\tif (this.onTapOutsideTimer) {\r\n\t\t\t\tthis.onTapOutsideTimer = undefined\r\n\t\t\t\tthis.onBlur(event)\r\n\t\t\t}\r\n\t\t}, onTapOutsideDelay)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { getTogglerNode, getContainerNode } = this.props\r\n\t\tlet { children } = this.props\r\n\r\n\t\tchildren = React.cloneElement(children, {\r\n\t\t\tonBlur: this.onFocusOutRef.current && this.onFocusOutRef.current.onBlur\r\n\t\t})\r\n\r\n\t\tchildren = (\r\n\t\t\t<OnFocusOut\r\n\t\t\t\tref={this.onFocusOutRef}\r\n\t\t\t\tgetContainerNode={getContainerNode}\r\n\t\t\t\tgetTogglerNode={getTogglerNode}\r\n\t\t\t\tonFocusOut={this.onFocusOut}>\r\n\t\t\t\t{children}\r\n\t\t\t</OnFocusOut>\r\n\t\t)\r\n\r\n\t\treturn (\r\n\t\t\t<OnTapOutside\r\n\t\t\t\tref={this.onTapOutsideRef}\r\n\t\t\t\tgetContainerNode={getContainerNode}\r\n\t\t\t\tgetTogglerNode={getTogglerNode}\r\n\t\t\t\tonTapOutside={this.onTapOutside}>\r\n\t\t\t\t{children}\r\n\t\t\t</OnTapOutside>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nOnFocusOutOrTapOutside.propTypes = {\r\n\tgetContainerNode: PropTypes.func.isRequired,\r\n\tgetTogglerNode: PropTypes.func,\r\n\tonFocusOut: PropTypes.func.isRequired,\r\n\tonTapOutsideDelay: PropTypes.number.isRequired,\r\n\tlistenToTouches: PropTypes.bool.isRequired,\r\n\tchildren: PropTypes.node.isRequired\r\n}\r\n\r\nOnFocusOutOrTapOutside.defaultProps = {\r\n\t// `onFocusOut` is triggered right after `onTapOutside`.\r\n\t// This workaround prevents duplicate `onFocusOut` call.\r\n\tonTapOutsideDelay: 30,\r\n\tlistenToTouches: true\r\n}"]}