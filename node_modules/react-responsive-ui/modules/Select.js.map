{"version":3,"sources":["../source/Select.js"],"names":["PureComponent","Component","empty_value_option_value","Select","state","focus","select","focusToggler","selectButton","onCollapse","focusOut","setState","isExpanded","isUsingKeyboard","onExpand","expand","list","collapse","toggle","storeListRef","ref","storeSelectNode","node","storeSelectButton","storeInputComponentNode","inputComponentNode","storeContainerNode","container","getSelectButton","nativeSelectOnKeyDown","event","shouldShowOptionsList","onKeyDownFromNativeSelect","onKeyDown","nativeSelectOnMouseDown","preventDefault","nativeSelectOnChange","props","native","nativeExpanded","value","target","undefined","setValue","navigator","userAgent","toLowerCase","indexOf","onClick","disabled","required","fromNativeSelect","defaultPrevented","ctrlKey","altKey","shiftKey","metaKey","keyCode","isEmptyValue","newValue","onChange","onBlur","clearTimeout","blurTimer","onFocusOut","window","rruiCollapseOnFocusOut","_onFocusOut","onFocusIn","isFocused","upward","icon","compact","scroll","scrollMaxItems","scrollIntoView","alignment","saveOnIcons","placeholder","options","indicateInvalid","error","closeButtonIcon","closeLabel","optionComponent","selectedOptionComponent","wait","style","className","topLabel","getTopLabel","DISPLAY_FLEX","renderNativeSelect","renderSelectButton","getAriaLabel","map","option","i","divider","content","label","title","toggleClassName","selectedOptionClassName","selectedOptionInvalidClassName","selectedOptionDisabledClassName","SelectedOptionComponent","selected","getSelectedOption","selectedOptionLabel","getPlaceholder","showIconOnly","hasEmptyOption","createElement","name","tabIndex","renderNativeSelectOptions","empty_option_present","rendered_options","renderNativeSelectOption","unshift","key","nonSelectable","isDivider","ariaLabel","propTypes","arrayOf","shape","any","string","oneOfType","func","isRequired","elementType","bool","object","number","defaultProps","DefaultSelectedOptionComponent","indicateRequired","display"],"mappings":"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","file":"Select.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { polyfill as reactLifecyclesCompat } from 'react-lifecycles-compat'\r\nimport classNames from 'classnames'\r\n\r\nimport ExpandableList from './ExpandableList'\r\nimport List from './List'\r\nimport Label from './TextInputLabel'\r\nimport Ellipsis from './Ellipsis'\r\nimport Divider from './Divider'\r\nimport WithError from './WithError'\r\n\r\nimport { onBlurForReduxForm } from './utility/redux-form'\r\nimport { onBlur } from './utility/focus'\r\nimport { submitFormOnCtrlEnter, submitContainingForm } from './utility/dom'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\nconst empty_value_option_value = ''\r\n\r\n@reactLifecyclesCompat\r\nexport default class Select extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// A list of selectable options\r\n\t\toptions : PropTypes.arrayOf\r\n\t\t(\r\n\t\t\tPropTypes.shape\r\n\t\t\t({\r\n\t\t\t\t// Option value (may be `undefined`)\r\n\t\t\t\tvalue : PropTypes.any,\r\n\t\t\t\t// Could restrict it to stringifiable types\r\n\t\t\t\t// but I guess this is not required\r\n\t\t\t\t// and one could even use `object`s as `value`s.\r\n\t\t\t\t// // Option value (may be `undefined`)\r\n\t\t\t\t// value : PropTypes.oneOfType([\r\n\t\t\t\t// \tPropTypes.string,\r\n\t\t\t\t// \tPropTypes.number,\r\n\t\t\t\t// \tPropTypes.bool\r\n\t\t\t\t// ]),\r\n\t\t\t\t// Option label (may be `undefined`)\r\n\t\t\t\tlabel : PropTypes.string,\r\n\t\t\t\t// Option icon\r\n\t\t\t\ticon  : PropTypes.oneOfType\r\n\t\t\t\t([\r\n\t\t\t\t\tPropTypes.node,\r\n\t\t\t\t\tPropTypes.func\r\n\t\t\t\t]),\r\n\t\t\t\t// (deprecated, use `optionComponent` instead)\r\n\t\t\t\t// Render custom content (a React component).\r\n\t\t\t\t// Receives `{ value, label }` properties.\r\n\t\t\t\tcontent : PropTypes.func\r\n\t\t\t})\r\n\t\t)\r\n\t\t.isRequired,\r\n\r\n\t\t// HTML form input `name` attribute\r\n\t\tname       : PropTypes.string,\r\n\r\n\t\t// Label which is placed above the select\r\n\t\tlabel      : PropTypes.string,\r\n\r\n\t\t// Placeholder (like \"Choose\")\r\n\t\tplaceholder : PropTypes.string,\r\n\r\n\t\t// Selected option component.\r\n\t\t// (when `<Select/>` is not expanded).\r\n\t\t// Receives properties:\r\n\t\t// `{ ...option }` — All properties of the selected `option` such as `value`, `label`, etc. Each `option` must have a `value` and a `label` (`value` may be `undefined`).\r\n\t\t// `wait` — Passed through `wait` property of the `<Select/>` component. `<Autocomplete/>` renders a `<Select/>` internally and passes `wait={true}` when it's loading options.\r\n\t\t// Can only contain \"inline\" elements like `<span/>`,\r\n\t\t// not `<div/>`s, `<section/`>s, `<h1/>`s or `<p/>`s,\r\n\t\t// because `<button/>`s can't contain \"block\" elements.\r\n\t\t// `display: block` can still be set on `<span/>`s and other \"inline\" elements.\r\n\t\tselectedOptionComponent : PropTypes.elementType,\r\n\r\n\t\t// Option component.\r\n\t\t// (when `<Select/>` is expanded).\r\n\t\t// Receives properties:\r\n\t\t// * `{ ...option }` — All properties of an `option` such as `value`, `label`, etc. Each `option` must have a `value` and a `label` (`value` may be `undefined`).\r\n\t\t// * `selected: boolean` — If this option is selected.\r\n\t\t// * `focused: boolean` — If this option is focused.\r\n\t\t// * `disabled: boolean` — If this option is disabled. Seems to be not used for now.\r\n\t\t// Can only contain \"inline\" elements like `<span/>`,\r\n\t\t// not `<div/>`s, `<section/`>s, `<h1/>`s or `<p/>`s,\r\n\t\t// because `<button/>`s can't contain \"block\" elements.\r\n\t\t// `display: block` can still be set on `<span/>`s and other \"inline\" elements.\r\n\t\toptionComponent : PropTypes.elementType,\r\n\r\n\t\t// Options list alignment.\r\n\t\t// Is \"left\" by default.\r\n\t\talignment : PropTypes.string,\r\n\r\n\t\t// Whether to use native `<select/>`\r\n\t\tnative      : PropTypes.bool.isRequired,\r\n\r\n\t\t// Whether to use native `<select/>` when expanded\r\n\t\tnativeExpanded : PropTypes.bool.isRequired,\r\n\r\n\t\t// Show icon only for selected item,\r\n\t\t// and only if `icon` is `true`.\r\n\t\tsaveOnIcons : PropTypes.bool.isRequired,\r\n\r\n\t\t// Disables this control\r\n\t\tdisabled   : PropTypes.bool,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired   : PropTypes.bool.isRequired,\r\n\r\n\t\t// Set to `true` to display the loading indicator\r\n\t\twait       : PropTypes.bool.isRequired,\r\n\r\n\t\t// Selected option value\r\n\t\tvalue      : PropTypes.any,\r\n\r\n\t\t// Is called when an option is selected\r\n\t\tonChange   : PropTypes.func,\r\n\r\n\t\t// Is called when the select is blurred.\r\n\t\t// This `onBlur` interceptor is a workaround for `redux-form`,\r\n\t\t// so that it gets the parsed `value` in its `onBlur` handler,\r\n\t\t// not the formatted text.\r\n\t\tonBlur     : PropTypes.func,\r\n\r\n\t\t// If `scroll` is `false`, then options list\r\n\t\t// is not limited in height.\r\n\t\t// Is `true` by default (scrollable).\r\n\t\tscroll     : PropTypes.bool.isRequired,\r\n\r\n\t\t// Component CSS class\r\n\t\tclassName  : PropTypes.string,\r\n\r\n\t\t// `<button/>` toggler CSS class\r\n\t\t// (deprecated name, use `selectedOptionClassName` property name instead)\r\n\t\ttoggleClassName : PropTypes.string,\r\n\r\n\t\t// Selected option `<button/>` CSS class.\r\n\t\tselectedOptionClassName : PropTypes.string,\r\n\r\n\t\t// Selected option `<button/>` CSS class when `error` property is passed.\r\n\t\tselectedOptionInvalidClassName : PropTypes.string,\r\n\r\n\t\t// Selected option `<button/>` CSS class when `disabled` property is passed.\r\n\t\tselectedOptionDisabledClassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle      : PropTypes.object,\r\n\r\n\t\t// If this flag is set to `true`,\r\n\t\t// and `icon` is specified for a selected option,\r\n\t\t// then the selected option will be displayed\r\n\t\t// as icon only, without the label.\r\n\t\ticon       : PropTypes.bool,\r\n\r\n\t\t// If this flag is set to `true`,\r\n\t\t// then it makes `<Select/>` not stretch itself\r\n\t\t// to 100% width by making it `inline-block`.\r\n\t\t// Is set to `true` when `icon` is `true`\r\n\t\t// because it makes sense.\r\n\t\tcompact    : PropTypes.bool,\r\n\r\n\t\t// HTML `tabindex` attribute\r\n\t\ttabIndex   : PropTypes.number,\r\n\r\n\t\t// `aria-label` for the `<Select/>`'s `<button/>`.\r\n\t\t// Deprecated, use `aria-label` instead.\r\n\t\tariaLabel : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tnative : false,\r\n\t\tnativeExpanded : false,\r\n\r\n\t\tsaveOnIcons : false,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired : false,\r\n\r\n\t\t// Show `error` (if passed).\r\n\t\tindicateInvalid : true,\r\n\r\n\t\t// Set to `true` to display the loading indicator\r\n\t\twait : false,\r\n\r\n\t\t// Will show scrollbar on overflow.\r\n\t\tscroll : true,\r\n\r\n\t\talignment : 'left'\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\tfocus = () => this.select.focus()\r\n\r\n\t// On mobile devices the <button/> is focused instead of <select/>\r\n\t// because when <select/> is focused then native mobile <select/> is expanded.\r\n\tfocusToggler = () => this.selectButton.focus()\r\n\r\n\tonCollapse = ({ focusOut }) =>\r\n\t{\r\n\t\tthis.setState({ isExpanded: false })\r\n\r\n\t\tif (!focusOut) {\r\n\t\t\tif (this.isUsingKeyboard) {\r\n\t\t\t\tthis.focus()\r\n\t\t\t} else {\r\n\t\t\t\tthis.focusToggler()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonExpand = () => this.setState({ isExpanded: true })\r\n\r\n\texpand     = () => this.list.expand()\r\n\tcollapse   = () => this.list.collapse()\r\n\ttoggle     = () => this.list.toggle()\r\n\r\n\tstoreListRef = (ref) => this.list = ref\r\n\tstoreSelectNode = (node) => this.select = node\r\n\tstoreSelectButton = (node) => this.selectButton = node\r\n\tstoreInputComponentNode = (node) => this.inputComponentNode = node\r\n\tstoreContainerNode = (node) => this.container = node\r\n\r\n\tgetSelectButton = () => this.selectButton\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tclearTimeout(this.blurTimer)\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tupward,\r\n\t\t\ticon,\r\n\t\t\tcompact,\r\n\t\t\tscroll,\r\n\t\t\tscrollMaxItems,\r\n\t\t\tscrollIntoView,\r\n\t\t\talignment,\r\n\t\t\tsaveOnIcons,\r\n\t\t\tnative,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\tplaceholder,\r\n\t\t\toptions,\r\n\t\t\tvalue,\r\n\t\t\tonChange,\r\n\t\t\tindicateInvalid,\r\n\t\t\terror,\r\n\t\t\tcloseButtonIcon,\r\n\t\t\tcloseLabel,\r\n\t\t\toptionComponent,\r\n\t\t\tselectedOptionComponent,\r\n\t\t\twait,\r\n\t\t\tstyle,\r\n\t\t\tclassName\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst {\r\n\t\t\tisExpanded,\r\n\t\t\tisFocused\r\n\t\t} = this.state\r\n\r\n\t\tconst topLabel = this.getTopLabel()\r\n\r\n\t\treturn (\r\n\t\t\t<WithError\r\n\t\t\t\tsetRef={this.storeContainerNode}\r\n\t\t\t\terror={error}\r\n\t\t\t\tindicateInvalid={indicateInvalid}\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tclassName={classNames(className, 'rrui__select', {\r\n\t\t\t\t\t'rrui__select--compact' : compact || icon,\r\n\t\t\t\t\t'rrui__select--focus'   : isFocused\r\n\t\t\t\t})}>\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={this.storeInputComponentNode}\r\n\t\t\t\t\tstyle={selectedOptionComponent && DISPLAY_FLEX}\r\n\t\t\t\t\tclassName={selectedOptionComponent ? undefined : 'rrui__input'}>\r\n\r\n\t\t\t\t\t{ wait && <Ellipsis/> }\r\n\r\n\t\t\t\t\t{/* Could use a wrapping `<label/>` here\r\n\t\t\t\t\t    but except the native `<select/>` there's\r\n\t\t\t\t\t    also a `<button/>` so they can't both\r\n\t\t\t\t\t    be wrapped in a `<label/>`.\r\n\t\t\t\t\t    In some future major version, when `--focus`\r\n\t\t\t\t\t    classes are added, the `<button/>` can be\r\n\t\t\t\t\t    moved out of the wrapping `<label/>`. */}\r\n\t\t\t\t\t{/* https://www.w3.org/TR/html50/forms.html#category-label */}\r\n\r\n\t\t\t\t\t{/* A transparent native `<select/>` on top\r\n\t\t\t\t\t    in case of `nativeExpanded={true}`.\r\n\t\t\t\t\t    (for better UX on mobile devices).\r\n\t\t\t\t\t    In case of `nativeExpanded={false}`\r\n\t\t\t\t\t    the native `<select/>` can be used for\r\n\t\t\t\t\t    javascriptless `<form/>` submission.\r\n\t\t\t\t\t    In case of `native={true}` it's just a\r\n\t\t\t\t\t    native `<select/>`. */}\r\n\t\t\t\t\t{ this.renderNativeSelect() }\r\n\r\n\t\t\t\t\t{/* The currently selected option */}\r\n\t\t\t\t\t{ !native && this.renderSelectButton() }\r\n\r\n\t\t\t\t\t{/* Top Label */}\r\n\t\t\t\t\t{/* (this label is placed after the \"selected\" button\r\n\t\t\t\t\t     to utilize the CSS `+` selector) */}\r\n\t\t\t\t\t{/* If the `placeholder` wasn't specified\r\n\t\t\t\t\t    but `label` was and no option is currently selected\r\n\t\t\t\t\t    then the `label` becomes the `placeholder`\r\n\t\t\t\t\t    until something is selected */}\r\n\t\t\t\t\t{ topLabel &&\r\n\t\t\t\t\t\t<Label\r\n\t\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\t\trequired={ required }\r\n\t\t\t\t\t\t\tinvalid={ indicateInvalid && error }\r\n\t\t\t\t\t\t\tfloats={ false }>\r\n\t\t\t\t\t\t\t{ topLabel }\r\n\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* The list of selectable options */}\r\n\t\t\t\t\t{ this.shouldShowOptionsList() &&\r\n\t\t\t\t\t\t<ExpandableList\r\n\t\t\t\t\t\t\tref={this.storeListRef}\r\n\t\t\t\t\t\t\taria-label={this.getAriaLabel()}\r\n\t\t\t\t\t\t\taria-required={required && isEmptyValue(value) ? true : undefined}\r\n\t\t\t\t\t\t\taria-invalid={error && indicateInvalid ? true : undefined}\r\n\t\t\t\t\t\t\tupward={upward}\r\n\t\t\t\t\t\t\talignment={alignment}\r\n\t\t\t\t\t\t\tscrollIntoView={scrollIntoView}\r\n\t\t\t\t\t\t\tscrollMaxItems={scroll === false ? 0 : scrollMaxItems}\r\n\t\t\t\t\t\t\ttabbable={false}\r\n\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\tonChange={this.setValue}\r\n\t\t\t\t\t\t\tonCollapse={this.onCollapse}\r\n\t\t\t\t\t\t\tonExpand={this.onExpand}\r\n\t\t\t\t\t\t\tgetTogglerNode={this.getSelectButton}\r\n\t\t\t\t\t\t\tonFocusIn={this.onFocusIn}\r\n\t\t\t\t\t\t\tonFocusOut={this.onFocusOut}\r\n\t\t\t\t\t\t\tcloseButtonIcon={closeButtonIcon}\r\n\t\t\t\t\t\t\tcloseLabel={closeLabel}\r\n\t\t\t\t\t\t\tclassName={classNames('rrui__shadow', 'rrui__options-list',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__options-list--left-aligned'  : alignment === 'left',\r\n\t\t\t\t\t\t\t\t'rrui__options-list--right-aligned' : alignment === 'right'\r\n\t\t\t\t\t\t\t})}>\r\n\r\n\t\t\t\t\t\t\t{options.map((option, i) => (\r\n\t\t\t\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\tvalue={option.value}\r\n\t\t\t\t\t\t\t\t\ticon={option.divider || saveOnIcons ? undefined : option.icon}\r\n\t\t\t\t\t\t\t\t\tcomponent={option.divider ? undefined : optionComponent}\r\n\t\t\t\t\t\t\t\t\titem={option.divider ? undefined : (optionComponent ? option : undefined)}>\r\n\t\t\t\t\t\t\t\t\t{option.divider ? <Divider/> :\r\n\t\t\t\t\t\t\t\t\t\t(optionComponent ? undefined : (option.content ? option.content(option) : option.label))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</List.Item>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ExpandableList>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</WithError>\r\n\t\t)\r\n\t}\r\n\r\n\trenderSelectButton()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\twait,\r\n\t\t\tvalue,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\ticon,\r\n\t\t\ttitle,\r\n\t\t\tnative,\r\n\t\t\tnativeExpanded,\r\n\t\t\ttoggleClassName,\r\n\t\t\tselectedOptionClassName,\r\n\t\t\tselectedOptionInvalidClassName,\r\n\t\t\tselectedOptionDisabledClassName,\r\n\t\t\tindicateInvalid,\r\n\t\t\terror,\r\n\t\t\tselectedOptionComponent: SelectedOptionComponent\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst { isExpanded } = this.state\r\n\r\n\t\tconst selected = this.getSelectedOption()\r\n\r\n\t\tconst selectedOptionLabel = selected && selected.label || this.getPlaceholder()\r\n\t\tconst showIconOnly = icon && selected && selected.icon\r\n\r\n\t\t// ARIA (accessibility) roles info:\r\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/listbox/listbox-collapsible.html\r\n\t\t//\r\n\t\t// `aria-haspopup`:\r\n\t\t// https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup\r\n\t\t// WAI-ARIA 1.1 is not yet supported, so not using `aria-haspopup=\"listbox\"`.\r\n\r\n\t\t// This button could be focusable in case of !native && !nativeExpanded.\r\n\t\t// In case of nativeExpanded if this button was focusable then the user would\r\n\t\t// tab to the button and press Spacebar key and there would be no way to\r\n\t\t// expand the native select so the keyboard user would be stuck.\r\n\t\t// Because of this, this button is never tabbable and native select always is.\r\n\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\tref={ this.storeSelectButton }\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tdisabled={ disabled }\r\n\t\t\t\tonClick={ this.onClick }\r\n\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\tonFocus={ this.onFocusIn }\r\n\t\t\t\tonBlur={ this.onBlur }\r\n\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\ttitle={ title }\r\n\t\t\t\taria-label={ this.getAriaLabel() || (showIconOnly ? selectedOptionLabel : undefined) }\r\n\t\t\t\taria-expanded={ isExpanded ? true : false }\r\n\t\t\t\tclassName={ classNames\r\n\t\t\t\t(\r\n\t\t\t\t\t'rrui__button-reset',\r\n\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t'rrui__select__button',\r\n\t\t\t\t\ttoggleClassName,\r\n\t\t\t\t\tselectedOptionClassName,\r\n\t\t\t\t\tselectedOptionInvalidClassName && SelectedOptionComponent && indicateInvalid && error,\r\n\t\t\t\t\tselectedOptionDisabledClassName && SelectedOptionComponent && disabled,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'rrui__input-element': !SelectedOptionComponent,\r\n\t\t\t\t\t\t'rrui__select__button--empty'    : !SelectedOptionComponent && isEmptyValue(value) && !this.hasEmptyOption(),\r\n\t\t\t\t\t\t'rrui__select__button--invalid'  : !SelectedOptionComponent && indicateInvalid && error,\r\n\t\t\t\t\t\t'rrui__select__button--disabled' : !SelectedOptionComponent && disabled\r\n\t\t\t\t\t}\r\n\t\t\t\t) }>\r\n\t\t\t\t{SelectedOptionComponent\r\n\t\t\t\t\t?\r\n\t\t\t\t\t<SelectedOptionComponent\r\n\t\t\t\t\t\twait={wait}\r\n\t\t\t\t\t\t{...selected}/>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<DefaultSelectedOptionComponent\r\n\t\t\t\t\t\tindicateRequired={!this.getTopLabel() && required && isEmptyValue(value)}\r\n\t\t\t\t\t\twait={wait}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tlabel={selectedOptionLabel}\r\n\t\t\t\t\t\ticon={showIconOnly ? React.createElement(selected.icon, { value, label: selectedOptionLabel }) : undefined}/>\r\n\t\t\t\t}\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n\r\n\trenderNativeSelect()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tname,\r\n\t\t\tvalue,\r\n\t\t\tlabel,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\tnative,\r\n\t\t\tnativeExpanded,\r\n\t\t\terror,\r\n\t\t\tindicateInvalid,\r\n\t\t\ttabIndex\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<select\r\n\t\t\t\tref={ this.storeSelectNode }\r\n\t\t\t\tname={ name }\r\n\t\t\t\tvalue={ isEmptyValue(value) ? empty_value_option_value : value }\r\n\t\t\t\tdisabled={ disabled }\r\n\t\t\t\tonKeyDown={ this.nativeSelectOnKeyDown }\r\n\t\t\t\tonMouseDown={ this.nativeSelectOnMouseDown }\r\n\t\t\t\tonChange={ this.nativeSelectOnChange }\r\n\t\t\t\tonFocus={ this.onFocusIn }\r\n\t\t\t\tonBlur={ this.onBlur }\r\n\t\t\t\ttabIndex={ tabIndex }\r\n\t\t\t\taria-label={ this.getAriaLabel() }\r\n\t\t\t\taria-required={ required && isEmptyValue(value) ? true : undefined }\r\n\t\t\t\taria-invalid={ error && indicateInvalid ? true : undefined }\r\n\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\t// `:focus` style is implemented via border color\r\n\t\t\t\t\t// so outline can be muted safely here.\r\n\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t'rrui__select__native', {\r\n\t\t\t\t\t\t'rrui__select__native--overlay' : !native,\r\n\t\t\t\t\t\t'rrui__select__native--invalid' : indicateInvalid && error\r\n\t\t\t\t\t}\r\n\t\t\t\t) }>\r\n\t\t\t\t{this.renderNativeSelectOptions()}\r\n\t\t\t</select>\r\n\t\t)\r\n\t}\r\n\r\n\trenderNativeSelectOptions()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\toptions,\r\n\t\t\tvalue,\r\n\t\t\tplaceholder\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tlet empty_option_present = false\r\n\r\n\t\tconst rendered_options = options.map((option, i) =>\r\n\t\t{\r\n\t\t\tlet { value, label, divider } = option\r\n\r\n\t\t\tif (!divider && isEmptyValue(value))\r\n\t\t\t{\r\n\t\t\t\tempty_option_present = true\r\n\t\t\t\tvalue = empty_value_option_value\r\n\t\t\t}\r\n\r\n\t\t\treturn this.renderNativeSelectOption(i, value, label, divider === true, divider)\r\n\t\t})\r\n\r\n\t\tif (isEmptyValue(value) && !empty_option_present)\r\n\t\t{\r\n\t\t\trendered_options.unshift(this.renderNativeSelectOption(-1, undefined, placeholder, true))\r\n\t\t}\r\n\r\n\t\treturn rendered_options\r\n\t}\r\n\r\n\trenderNativeSelectOption(key, value, label, nonSelectable, isDivider)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<option\r\n\t\t\t\tkey={ key }\r\n\t\t\t\tvalue={ isEmptyValue(value) ? '' : value }\r\n\t\t\t\thidden={ nonSelectable && !isDivider ? true : undefined }\r\n\t\t\t\tdisabled={ nonSelectable ? true : undefined }\r\n\t\t\t\tclassName={ classNames('rrui__select__native-option', {\r\n\t\t\t\t\t'rrui__select__native-option--divider': isDivider\r\n\t\t\t\t})}>\r\n\t\t\t\t{ label }\r\n\t\t\t</option>\r\n\t\t)\r\n\t}\r\n\r\n\tnativeSelectOnKeyDown = (event) =>\r\n\t{\r\n\t\tthis.isUsingKeyboard = true\r\n\r\n\t\tif (this.shouldShowOptionsList())\r\n\t\t{\r\n\t\t\t// Native select is the main focusable element now\r\n\t\t\t// even when the custom select is rendered.\r\n\t\t\t// this.focusToggler()\r\n\t\t\tthis.onKeyDownFromNativeSelect = true\r\n\t\t\tthis.onKeyDown(event)\r\n\t\t}\r\n\t}\r\n\r\n\tnativeSelectOnMouseDown = (event) =>\r\n\t{\r\n\t\tif (this.shouldShowOptionsList())\r\n\t\t{\r\n\t\t\tevent.preventDefault()\r\n\t\t\t// Native select is the main focusable element now\r\n\t\t\t// even when the custom select is rendered.\r\n\t\t\t// this.focusToggler()\r\n\t\t\tthis.toggle()\r\n\t\t}\r\n\t}\r\n\r\n\tnativeSelectOnChange = (event) =>\r\n\t{\r\n\t\tconst { native, nativeExpanded } = this.props\r\n\r\n\t\tlet value = event.target.value\r\n\r\n\t\t// Convert back from an empty string to `undefined`\r\n\t\tif (value === empty_value_option_value)\r\n\t\t{\r\n\t\t\t// `null` is not accounted for, use `undefined` instead.\r\n\t\t\tvalue = undefined\r\n\t\t}\r\n\r\n\t\tthis.setValue(value)\r\n\r\n\t\t// Firefox has a bug:\r\n\t\t// Spacebar key on native `<select/>` is not being \"preventDefault\"ed.\r\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1428992\r\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1019630\r\n\t\t// https://stackoverflow.com/questions/15141398/cannot-preventdefault-via-firefox-on-a-select\r\n\t\t// This workaround hides the custom `<Select/>`\r\n\t\t// when a user selects something in the native `<select/>`\r\n\t\t// which expands over the custom one in Firefox due to the bug.\r\n\t\tif (navigator.userAgent.toLowerCase().indexOf('firefox') >= 0) {\r\n\t\t\tif (!native && !nativeExpanded) {\r\n\t\t\t\tthis.collapse()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonClick = (event) =>\r\n\t{\r\n\t\tconst { disabled, nativeExpanded } = this.props\r\n\r\n\t\tif (!disabled) {\r\n\t\t\tthis.toggle()\r\n\t\t}\r\n\t}\r\n\r\n\tonKeyDown = (event) =>\r\n\t{\r\n\t\tconst { disabled, value, required } = this.props\r\n\t\tconst { isExpanded } = this.state\r\n\r\n\t\t// Reset \"event came from native select\" flag.\r\n\t\tconst fromNativeSelect = this.onKeyDownFromNativeSelect\r\n\t\tthis.onKeyDownFromNativeSelect = false\r\n\r\n\t\tif (disabled) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (!isExpanded) {\r\n\t\t\tif (submitFormOnCtrlEnter(event, this.selectButton)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// \"Up\" arrow.\r\n\t\t\t// Select the previous item (if present).\r\n\t\t\tcase 38:\r\n\t\t\t// \"Down\" arrow.\r\n\t\t\t// Select the next item (if present).\r\n\t\t\tcase 40:\r\n\t\t\t\t// Firefox has a bug:\r\n\t\t\t\t// Up/Down arrow keys on native `<select/>` are not being \"preventDefault\"ed.\r\n\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1428992\r\n\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1019630\r\n\t\t\t\t// https://stackoverflow.com/questions/15141398/cannot-preventdefault-via-firefox-on-a-select\r\n\t\t\t\t// This workaround doesn't expand the custom `<Select/>`\r\n\t\t\t\t// when a user presses an Up/Down arrow key on the native `<select/>`.\r\n\t\t\t\tif (navigator.userAgent.toLowerCase().indexOf('firefox') >= 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn this.list.onKeyDown(event)\r\n\r\n\t\t\t// \"Enter\".\r\n\t\t\tcase 13:\r\n\t\t\t\t// Submit containing `<form/>`.\r\n\t\t\t\t// Expand otherwise.\r\n\t\t\t\tif ((required && isEmptyValue(value)) || !submitContainingForm(this.selectButton)) {\r\n\t\t\t\t\tthis.expand()\r\n\t\t\t\t}\r\n\t\t\t\treturn event.preventDefault()\r\n\r\n\t\t\t// \"Spacebar\".\r\n\t\t\tcase 32:\r\n\t\t\t\tif (fromNativeSelect)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Firefox has a bug:\r\n\t\t\t\t\t// Spacebar key on native `<select/>` is not being \"preventDefault\"ed.\r\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1428992\r\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1019630\r\n\t\t\t\t\t// https://stackoverflow.com/questions/15141398/cannot-preventdefault-via-firefox-on-a-select\r\n\t\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\t\tthis.expand()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\thasEmptyOption()\r\n\t{\r\n\t\tconst { options } = this.props\r\n\r\n\t\tfor (const option of options) {\r\n\t\t\tif (!option.divider && isEmptyValue(option.value)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tgetSelectedOption()\r\n\t{\r\n\t\tconst { options, value } = this.props\r\n\r\n\t\tfor (const option of options)\r\n\t\t{\r\n\t\t\tif (!option.divider && option.value === value)\r\n\t\t\t{\r\n\t\t\t\treturn option\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetAriaLabel()\r\n\t{\r\n\t\tconst {\r\n\t\t\t// Deprecated, use `aria-label` instead.\r\n\t\t\tariaLabel,\r\n\t\t\tlabel\r\n\t\t} = this.props\r\n\r\n\t\treturn this.props['aria-label'] || ariaLabel || label\r\n\t}\r\n\r\n\tgetTopLabel()\r\n\t{\r\n\t\tconst { label, placeholder, value } = this.props\r\n\r\n\t\tif (isEmptyValue(value) && !placeholder) {\r\n\t\t\t// Label will be shown in placeholder's place\r\n\t\t\t// so don't show it as a label to prevent duplication.\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\treturn label\r\n\t}\r\n\r\n\tgetPlaceholder()\r\n\t{\r\n\t\tconst { label, placeholder, value } = this.props\r\n\r\n\t\tif (isEmptyValue(value)) {\r\n\t\t\treturn placeholder || label\r\n\t\t}\r\n\t}\r\n\r\n\tshouldShowOptionsList()\r\n\t{\r\n\t\tconst { native, nativeExpanded } = this.props\r\n\t\treturn !native && !nativeExpanded\r\n\t}\r\n\r\n\tsetValue = (newValue) =>\r\n\t{\r\n\t\tconst { value, onChange } = this.props\r\n\r\n\t\t// Call `onChange` only if the `value` did change.\r\n\t\tif (newValue !== value) {\r\n\t\t\tonChange(newValue)\r\n\t\t}\r\n\t}\r\n\r\n\tonBlur = (event) =>\r\n\t{\r\n\t\tclearTimeout(this.blurTimer)\r\n\t\tthis.blurTimer = onBlur(event, this.onFocusOut, () => this.container)\r\n\t}\r\n\r\n\tonFocusOut = (event) =>\r\n\t{\r\n\t\tconst { native, nativeExpanded, onBlur, value } = this.props\r\n\r\n\t\tif (!native && !nativeExpanded) {\r\n\t\t\t// `window.rruiCollapseOnFocusOut` can be used\r\n\t\t\t// for debugging expandable contents.\r\n\t\t\tif (window.rruiCollapseOnFocusOut !== false) {\r\n\t\t\t\tthis.collapse()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// // Collapse the options `<List/>` if it's expanded.\r\n\t\t// if (this.list) {\r\n\t\t// \tthis.list.onBlur(event)\r\n\t\t// }\r\n\r\n\t\tthis._onFocusOut()\r\n\r\n\t\tif (onBlur) {\r\n\t\t\tonBlurForReduxForm(onBlur, event, value)\r\n\t\t}\r\n\t}\r\n\r\n\tonFocusIn    = () => this.setState({ isFocused: true })\r\n\t_onFocusOut = () => this.setState({ isFocused: false })\r\n}\r\n\r\n// Using indexes instead for keys.\r\n// // There can be an `undefined` value,\r\n// // so just `{ value }` won't do here.\r\n// function getOptionKey(value) {\r\n// \treturn isEmptyValue(value) ? '@@rrui/empty' : value\r\n// }\r\n\r\nfunction isEmptyValue(value)\r\n{\r\n\treturn value === null || value === undefined\r\n}\r\n\r\nfunction DefaultSelectedOptionComponent({\r\n\tvalue,\r\n\tlabel,\r\n\ticon,\r\n\tindicateRequired,\r\n\twait\r\n}) {\r\n\t// The `<span/>` wrapper is required for vertical centering.\r\n\t// http://stackoverflow.com/questions/35464067/flexbox-not-working-on-button-element-in-some-browsers\r\n\treturn (\r\n\t\t<span className=\"rrui__select__selected-content\">\r\n\t\t\t{/* Selected option label (or icon) */}\r\n\t\t\t<span\r\n\t\t\t\tclassName={classNames('rrui__select__selected-label', 'rrui__text-line', {\r\n\t\t\t\t\t'rrui__select__selected-label--required': indicateRequired\r\n\t\t\t\t})}>\r\n\t\t\t\t{icon || label}\r\n\t\t\t</span>\r\n\t\t\t{/* An arrow */}\r\n\t\t\t{!wait && <span className=\"rrui__select__arrow\"/>}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nDefaultSelectedOptionComponent.propTypes = {\r\n\tvalue: PropTypes.any,\r\n\tlabel: PropTypes.string,\r\n\ticon: PropTypes.node,\r\n\tindicateRequired: PropTypes.bool,\r\n\twait: PropTypes.bool\r\n}\r\n\r\n/* `display: flex` fixes the incorrect toggler `<button/>` height\r\n   in cases when custom `selectedOptionComponent` is used.\r\n   It also removes the requirement for the `selectedOptionComponent`\r\n   containing `<span/>` to be `display: block`. */\r\nconst DISPLAY_FLEX = {\r\n\tdisplay: 'flex'\r\n}"]}